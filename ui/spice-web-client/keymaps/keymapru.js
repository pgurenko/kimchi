wdi.KeymapRU = function() {

    var charmapRU = [];
    charmapRU['ё']   = [[0x29, 0, 0, 0], [0xA9, 0, 0, 0]];
    charmapRU['Ё']   = [[0x2A, 0, 0, 0], [0x29, 0, 0, 0], [0xA9, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['1']   = [[0x2, 0, 0, 0],[0x82, 0, 0, 0]];
    charmapRU['!']   = [[0x2A, 0, 0, 0], [0x2, 0, 0, 0], [0x82, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['2']   = [[0x3, 0, 0, 0], [0x83, 0, 0, 0]];
    charmapRU['"']   = [[0x2A, 0, 0, 0], [0x3, 0, 0, 0], [0x83, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['3']   = [[0x4, 0, 0, 0], [0x84, 0, 0, 0]];
    charmapRU['№']   = [[0x2A, 0, 0, 0], [0x4, 0, 0, 0], [0x84, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['4']   = [[0x5, 0, 0, 0], [0x85, 0, 0, 0]];
    charmapRU[';']   = [[0x2A, 0, 0, 0], [0x5, 0, 0, 0], [0x85, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['5']   = [[0x6, 0, 0, 0], [0x86, 0, 0, 0]];
    charmapRU['%']   = [[0x2A, 0, 0, 0], [0x6, 0, 0, 0], [0x86, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['6']   = [[0x7, 0, 0, 0], [0x87, 0, 0, 0]];
    charmapRU[':']   = [[0x2A, 0, 0, 0], [0x7, 0, 0, 0], [0x87, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['7']   = [[0x8, 0, 0, 0], [0x88, 0, 0, 0]];
    charmapRU['?']   = [[0x2A, 0, 0, 0], [0x8, 0, 0, 0], [0x88, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['8']   = [[0x9, 0, 0, 0], [0x89, 0, 0, 0]];
    charmapRU['*']   = [[0x2A, 0, 0, 0], [0x9, 0, 0, 0], [0x89, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['9']   = [[0x0A, 0, 0, 0], [0x8A, 0, 0, 0]];
    charmapRU['(']   = [[0x2A, 0, 0, 0], [0x0A, 0, 0, 0], [0x8A, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['0']   = [[0x0B, 0, 0, 0], [0x8B, 0, 0, 0]];
    charmapRU[')']   = [[0x2A, 0, 0, 0], [0x0B, 0, 0, 0], [0x8B, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['-']   = [[0x0C, 0, 0, 0], [0x8C, 0, 0, 0]];
    charmapRU['_']   = [[0x2A, 0, 0, 0], [0x0C, 0, 0, 0], [0x8C, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['=']   = [[0x0D, 0, 0, 0], [0x8D, 0, 0, 0]];
    charmapRU['+']   = [[0x2A, 0, 0, 0], [0x0D, 0, 0, 0], [0x8D, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['й']   = [[0x10, 0, 0, 0], [0x90, 0, 0, 0]];
    charmapRU['Й']   = [[0x2A, 0, 0, 0], [0x10, 0, 0, 0], [0x90, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['ц']   = [[0x11, 0, 0, 0], [0x91, 0, 0, 0]];
    charmapRU['Ц']   = [[0x2A, 0, 0, 0], [0x11, 0, 0, 0], [0x91, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['у']   = [[0x12, 0, 0, 0], [0x92, 0, 0, 0]];
    charmapRU['У']   = [[0x2A, 0, 0, 0], [0x12, 0, 0, 0], [0x92, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['к']   = [[0x13, 0, 0, 0], [0x93, 0, 0, 0]];
    charmapRU['К']   = [[0x2A, 0, 0, 0], [0x13, 0, 0, 0], [0x93, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['е']   = [[0x14, 0, 0, 0], [0x94, 0, 0, 0]];
    charmapRU['Е']   = [[0x2A, 0, 0, 0], [0x14, 0, 0, 0], [0x94, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['н']   = [[0x15, 0, 0, 0], [0x95, 0, 0, 0]];
    charmapRU['Н']   = [[0x2A, 0, 0, 0], [0x15, 0, 0, 0], [0x95, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['г']   = [[0x16, 0, 0, 0], [0x96, 0, 0, 0]];
    charmapRU['Г']   = [[0x2A, 0, 0, 0], [0x16, 0, 0, 0], [0x96, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['ш']   = [[0x17, 0, 0, 0], [0x97, 0, 0, 0]];
    charmapRU['Ш']   = [[0x2A, 0, 0, 0], [0x17, 0, 0, 0], [0x97, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['щ']   = [[0x18, 0, 0, 0], [0x98, 0, 0, 0]];
    charmapRU['Щ']   = [[0x2A, 0, 0, 0], [0x18, 0, 0, 0], [0x98, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['з']   = [[0x19, 0, 0, 0], [0x99, 0, 0, 0]];
    charmapRU['З']   = [[0x2A, 0, 0, 0], [0x19, 0, 0, 0], [0x99, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['х']   = [[0x1A, 0, 0, 0], [0x9A, 0, 0, 0]];
    charmapRU['Х']   = [[0x2A, 0, 0, 0], [0x1A, 0, 0, 0], [0x9A, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['ъ']   = [[0x1B, 0, 0, 0], [0x9B, 0, 0, 0]];
    charmapRU['Ъ']   = [[0x2A, 0, 0, 0], [0x1B, 0, 0, 0], [0x9B, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['\\']  = [[0x2B, 0, 0, 0], [0xAB, 0, 0, 0]];
    charmapRU['/']   = [[0x2A, 0, 0, 0], [0x2B, 0, 0, 0], [0xAB, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['ф']   = [[0x1E, 0, 0, 0], [0x9E, 0, 0, 0]];
    charmapRU['Ф']   = [[0x2A, 0, 0, 0], [0x1E, 0, 0, 0], [0x9E, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['ы']   = [[0x1F, 0, 0, 0], [0x9F, 0, 0, 0]];
    charmapRU['Ы']   = [[0x2A, 0, 0, 0], [0x1F, 0, 0, 0], [0x9F, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['в']   = [[0x20, 0, 0, 0], [0xA0, 0, 0, 0]];
    charmapRU['В']   = [[0x2A, 0, 0, 0], [0x20, 0, 0, 0], [0xA0, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['а']   = [[0x21, 0, 0, 0], [0xA1, 0, 0, 0]];
    charmapRU['А']   = [[0x2A, 0, 0, 0], [0x21, 0, 0, 0], [0xA1, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['п']   = [[0x22, 0, 0, 0], [0xA2, 0, 0, 0]];
    charmapRU['П']   = [[0x2A, 0, 0, 0], [0x22, 0, 0, 0], [0xA2, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['р']   = [[0x23, 0, 0, 0], [0xA3, 0, 0, 0]];
    charmapRU['Р']   = [[0x2A, 0, 0, 0], [0x23, 0, 0, 0], [0xA3, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['о']   = [[0x24, 0, 0, 0], [0xA4, 0, 0, 0]];
    charmapRU['О']   = [[0x2A, 0, 0, 0], [0x24, 0, 0, 0], [0xA4, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['л']   = [[0x25, 0, 0, 0], [0xA5, 0, 0, 0]];
    charmapRU['Л']   = [[0x2A, 0, 0, 0], [0x25, 0, 0, 0], [0xA5, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['д']   = [[0x26, 0, 0, 0], [0xA6, 0, 0, 0]];
    charmapRU['Д']   = [[0x2A, 0, 0, 0], [0x26, 0, 0, 0], [0xA6, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['ж']   = [[0x27, 0, 0, 0], [0xA7, 0, 0, 0]];
    charmapRU['Ж']   = [[0x2A, 0, 0, 0], [0x27, 0, 0, 0], [0xA7, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['э']   = [[0x28, 0, 0, 0], [0xA8, 0, 0, 0]];
    charmapRU['Э']   = [[0x2A, 0, 0, 0], [0x28, 0, 0, 0], [0xA8, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['я']   = [[0x2C, 0, 0, 0], [0xAC, 0, 0, 0]];
    charmapRU['Я']   = [[0x2A, 0, 0, 0], [0x2C, 0, 0, 0], [0xAC, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['ч']   = [[0x2D, 0, 0, 0], [0xAD, 0, 0, 0]];
    charmapRU['Ч']   = [[0x2A, 0, 0, 0], [0x2D, 0, 0, 0], [0xAD, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['с']   = [[0x2E, 0, 0, 0], [0xAE, 0, 0, 0]];
    charmapRU['С']   = [[0x2A, 0, 0, 0], [0x2E, 0, 0, 0], [0xAE, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['м']   = [[0x2F, 0, 0, 0], [0xAF, 0, 0, 0]];
    charmapRU['М']   = [[0x2A, 0, 0, 0], [0x2F, 0, 0, 0], [0xAF, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['и']   = [[0x30, 0, 0, 0], [0xB0, 0, 0, 0]];
    charmapRU['И']   = [[0x2A, 0, 0, 0], [0x30, 0, 0, 0], [0xB0, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['т']   = [[0x31, 0, 0, 0], [0xB1, 0, 0, 0]];
    charmapRU['Т']   = [[0x2A, 0, 0, 0], [0x31, 0, 0, 0], [0xB1, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['ь']   = [[0x32, 0, 0, 0], [0xB2, 0, 0, 0]];
    charmapRU['Ь']   = [[0x2A, 0, 0, 0], [0x32, 0, 0, 0], [0xB2, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['б']   = [[0x33, 0, 0, 0], [0xB3, 0, 0, 0]];
    charmapRU['Б']   = [[0x2A, 0, 0, 0], [0x33, 0, 0, 0], [0xB3, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['ю']   = [[0x34, 0, 0, 0], [0xB4, 0, 0, 0]];
    charmapRU['Ю']   = [[0x2A, 0, 0, 0], [0x34, 0, 0, 0], [0xB4, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU['.']   = [[0x35, 0, 0, 0], [0xB5, 0, 0, 0]];
    charmapRU[',']   = [[0x2A, 0, 0, 0], [0x35, 0, 0, 0], [0xB5, 0, 0, 0], [0xAA, 0, 0, 0]];
    charmapRU[' ']   = [[0x39, 0, 0, 0], [0xb9, 0, 0, 0]];

    var keymapRU = [];

    keymapRU[27]                 = 0x1; // ESC
    keymapRU[9]                 = 0x0F; // TAB
    //keymapRU[20]                = 0x3A; // // BLOQ.MAY. => see the charmap, all the capital letters and shift chars send a shift in their sequence
    keymapRU[16]                = 0x2A; // LEFT SHIFT and RIGHT SHIFT
	keymapRU[91]                = 0x1D; // LEFT GUI (META, COMMAND) BINDED TO CONTROL
	keymapRU[17]                = 0x1D; // LEFT CONTROL and RIGHT CONTROL
    keymapRU[32]                = 0x39; // SPACE
    keymapRU[8]                 = 0x0E; // BACKSPACE
    keymapRU[13]                = 0x1C; // ENTER
    //keymapRU[0]                 = 0x38; // RIGHT ALT (ALT GR)
    //keymapRU[92]                = 0x5C; // RIGHT GUI (WINDOWS)
    keymapRU[38]                = 0x48; // UP ARROW
    keymapRU[37]                = 0x4B; // LEFT ARROW
    keymapRU[40]                = 0x50; // DOWN ARROW
    keymapRU[39]                = 0x4D; // RIGHT ARROW
    keymapRU[45]                = 0x52; // INSERT
    keymapRU[46]                = 0x53; // DELETE
    keymapRU[36]                = 0x47; // HOME
    keymapRU[35]                = 0x4F; // FIN
    keymapRU[33]                = 0x49; // PAGE UP
    keymapRU[34]                = 0x51; // PAGE UP
    keymapRU[144]               = 0x45; // BLOQ.NUM.
    keymapRU[145]                = 0x46; // SCROLL LOCK
    keymapRU[112]                = 0x3B; // F1
    keymapRU[113]                = 0x3C; // F2
    keymapRU[114]                = 0x3D; // F3
    keymapRU[115]                = 0x3E; // F4
    keymapRU[116]                = 0x3F; // F5
    keymapRU[117]                = 0x40; // F6
    keymapRU[118]                = 0x41; // F7
    keymapRU[119]                = 0x42; // F8
    keymapRU[120]                = 0x43; // F9
    keymapRU[121]                = 0x44; // F10
    keymapRU[122]                = 0x57; // F11
    keymapRU[123]                = 0x58; // F12

    var ctrlkeymapRU = [];

    // ctrlkeymapRU[65]                = 0x1E; // a
    // ctrlkeymapRU[81]                = 0x10; // q
    // ctrlkeymapRU[87]                = 0x11; // w
    // ctrlkeymapRU[69]                = 0x12; // e
    // ctrlkeymapRU[82]                = 0x13; // r
    // ctrlkeymapRU[84]                = 0x14; // t
    // ctrlkeymapRU[89]                = 0x15; // y
    // ctrlkeymapRU[85]                = 0x16; // u
    // ctrlkeymapRU[73]                = 0x17; // i
    // ctrlkeymapRU[79]                = 0x18; // o
    // ctrlkeymapRU[80]                = 0x19; // p
    // ctrlkeymapRU[65]                = 0x1E; // a
    // ctrlkeymapRU[83]                = 0x1F; // s
    // ctrlkeymapRU[68]                = 0x20; // d
    // ctrlkeymapRU[70]                = 0x21; // f
    // ctrlkeymapRU[71]                = 0x22; // g
    // ctrlkeymapRU[72]                = 0x23; // h
    // ctrlkeymapRU[74]                = 0x24; // j
    // ctrlkeymapRU[75]                = 0x25; // k
    // ctrlkeymapRU[76]                = 0x26; // l
    // ctrlkeymapRU[90]                = 0x2C; // z
    // ctrlkeymapRU[88]                = 0x2D; // x
    // ctrlkeymapRU[67]                = 0x2E; // c
    // ctrlkeymapRU[86]                = 0x2F; // v      to enable set disableClipboard = true in run.js
    // ctrlkeymapRU[66]                = 0x30; // b
    // ctrlkeymapRU[78]                = 0x31; // n
    // ctrlkeymapRU[77]                = 0x32; // m

    var reservedCtrlKeymap = [];
    reservedCtrlKeymap[86] = 0x2F; //v


    return {
        getKeymap: function() {
            return keymapRU;
        },

        getCtrlKeymap: function() {
            return ctrlkeymapRU;
        },

        getReservedCtrlKeymap: function() {
            return reservedCtrlKeymap;
        },

        getCharmap: function() {
            return charmapRU;
        },

        setCtrlKey: function (key, val) {
            ctrlkeymapRU[key] = val;
        }
    };
}( );
